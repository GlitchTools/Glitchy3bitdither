<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Glitchy3bitDither</title>
    <link media="all" rel="stylesheet" href="{{ site.baseurl }}/style.css" type="text/css" />
    <script src="{{ site.baseurl }}/GlitchyDither.js" type="text/javascript"></script>
</head>
<body>
    <header>
        <h1>Glitchy3bitDither</h1>
        <nav>
            <a href="{{ site.baseurl }}/index.html">Demo</a>
            <a href="{{ site.baseurl }}/glitch.html">Glitch Only</a>
            <a href="{{ site.baseurl }}/GlitchCruiser.html">Glitch Cruiser</a>
            <a href="{{ site.baseurl }}/GlitchChooser.html">Glitch Chooser</a>
        </nav>
        <a href="#" id="info_btn">i</a>
    </header>
    <div id="info">
        <div>
            <p>Original Implemented by Nolan Caudill, code on github <a href="https://github.com/mncaudill/3bitdither">here</a></p>
            <p>"Enhanced" by JKirchartz, code also on github <a href="https://github.com/jkirchartz/Glitchy3bitdither">here</a></p>
            <p>This runs completely client-side, using the FileReader and canvas APIs, your image isn't being uploaded to any server. If you have a decent browser, this should work. Also, you can right-click and save the result of the processing.</p>
            <p>Check out some curated images at <a href="http://glitches.jkirchartz.com/">glitches.jkirchartz.com</a></p>
            <a href="#" id="close_btn">Ã—</a>
        </div>
    </div>
    <main>
    {{ content }}
    </main>
    <script>
        window.onload = function(){
            // handle the modal window (the rest is just CSS, woot!)
            var info = document.getElementById('info'),
                info_btn = document.getElementById('info_btn'),
                close_btn = document.getElementById('close_btn');
            function modal(e) {
                e.preventDefault;
                // toggle
                if(info.style.display === "block"){
                    info.style.display = "none";
                }else{
                    info.style.display = "block";
                }
                return false;
            }
            info_btn.onclick = modal;
            close_btn.onclick = modal;
            // set current page hilight for nav
            // depends on having a file extension
            document.body.id = location.pathname.slice(location.pathname.lastIndexOf('/')+1,location.pathname.lastIndexOf('.'));
        }
    </script>
</body>
</html>
